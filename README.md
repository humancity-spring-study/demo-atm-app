# demo-atm-app

---

## week1. 초간단 ATM
### 기한 : 9/24 토 12:00
* 간단한 현금 입출금 기능이 있는 서비스 만들기
* 비즈니스 요구사항
* 아래 3가지 핵심 기능은 구현되어야 한다. 
  * 계좌 개설
  * 입금 
  * 출금

### 계좌 개설 – 필수 구현
* 이름, 전화번호, 이메일, 계좌 비밀번호 입력받아 계좌번호로 구분되는 신규 계좌 생성을 할 수 있다.
* 계좌 비밀번호는 평문으로 관리되서는 안된다.
* 계좌가 정상적으로 생성되면 사용자에게 입력받았던 정보 + 계좌 번호를 리턴한다.
* 계좌번호 생성 규칙
* 계좌번호는 중복 생성되서는 안된다.
* 앞에 3자리는 “001”로 고정 되어야 한다.
* 가운데 숫자 2자리는 “00”으로 고정된다.
* 사용자 화면에는 3자리-2자리-9자리 하이픈으로 구분이 되어야 한다. • 계좌번호 발번 알고리즘은 편한 방식대로 사용한다.
* 예 : 001-00-123456789
* 편의를 위해 1인 1계좌로 설정한다.

### 계좌 개설 – 선택구현
* 이름, 전화번호, 이메일, 계좌 번호 등을 DB에 관리할 때는 복호화가 가 능한 양방향 암호화를 적용한다.
* 알고리즘은 자유롭게 선택 가능(ex. BASE64, AES ...)하나 저장은 암호화 하면서 반드시 원문으로 변환이 가능한 형태가 되어야 한다.

### 입금 – 필수 기능
* 계좌 번호, 계좌 비밀번호, 입금 금액을 입력 받아 입금을 처리한다.
* 유효하지 않은 계좌이거나 비밀번호 불일치시 입금 처리는 실패가 되고, 사용자에게 이에 맞는 메시지도 출력이 되어야 한다.
* 계좌번호 유효성은 입금 전에 처리되어야 한다.
* 0원 이하 금액은 입금 할 수 없다.
* 정상적으로 입금이 처리되면 입금 한 액수만큼 계좌 잔액을 더하고, 최 종 계좌 잔액을 사용자에게 리턴한다.

### 출금 – 필수 기능
* 계좌 번호, 계좌 비밀번호, 출금 금액을 입력 받아 출금 처리한다.
* 유효하지 않은 계좌이거나 비밀번호 불일치시 출금 처리는 실패가 되고, 사용자에게 이에 맞는 메시지도 출력이 되어야 한다.
* 계좌번호 유효성은 출금 진행 전에 처리되어야 한다.
* 출금이 성공하면 출금액과 계좌 잔액을 사용자에게 리턴한다.
* 잔액보다 많은 출금 요청이 들어온 경우는 허용 해서는 안된다.

### 입/출금 선택기능
* 계좌번호/계좌 비밀번호 입력 및 처리를 위한 별도 실행 흐름 또는 API분리
* 계좌 인증 단계를 로그인 프로세스 처럼 별도의 프로세스로 분리해서 구현하는 것을
* 다만,위경우로구현하는경우,입/출금처리가완료가되면다시로그인이전의처음 상태로 돌아가야 한다.
* 예를들어,최초입금요청전발급한토큰으로입금요청을수행하면,다음요청에서 동일한 토큰으로 인증이 되서는 안된다(1회용 토큰, OTP)
* 로그인 체계 구현을 위해 Token 베이스, Cookie-Session 방식 등 편한 방식을 사용. • 입/출금에 대한 이력 관리 권장.
* 이력관리정보:사용자명,계좌번호,거래일시,입/출금여부,금액
* 이력 저장은 사용자의 입/출금 처리와 트랜잭션 분리가 이루어져야 한다. 
  * 즉, 이력저장에 실패 했다고 해서 입/출금이 Rollback 되서는 안된다.
* 고액 입출금 email 알림
* 100만원 입/출금 시 사용자에게 email로 알림을 보내는 기능 추가. 
  * Email 알림도 입/출금 처리와 트랜잭션 분리가 이루어져야 한다.
* 입/출금 직후 바로 발송하도록 구현해도 되고, 매분 수행하는 batch job 형태로 구현 해도 무방.

## 기술적 요구사항

* 개발 언어와 SpringBoot 버전을 각자 편한 방식대로
* 되도록이면 Java는 11이상, SpringBoot는최신 버전 (2.7.3)을 사용하기를 권장 • maven/gradle각자편한방식의빌드도구사용
* DB는 각자 편한 방식대로 사용
* In-memory DB를 사용하거나 docker 컨테이너를 띄우거나, 로컬에 DB 서버 를 띄우는 방법 OK
* DBMS는 각자가 익숙한 제품을 자유롭게 사용
* DB 설계도 자유롭게 설정
* REST API 또는 MvcController로 구현가능
* 아키텍처, 모듈 구성, 기술 선택은 자유롭게 채택 가능
* 단위테스트 작성 : 커버리지 70% 이상 권장
